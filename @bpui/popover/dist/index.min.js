/*!
 * bpui popover v1.1.18
 * Copyright (c) 2021 Copyright bpoint.lee@live.com All Rights Reserved.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@bpui/libs"),require("@bpui/dialog")):"function"==typeof define&&define.amd?define(["@bpui/libs","@bpui/dialog"],e):(t=t||self).bpPopover=e(t.bpLibs,t.bpDialog)}(this,(function(t,e){"use strict";function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t,e){return t(e={exports:{}},e.exports),e.exports}var f=function(t){return t&&t.Math==Math&&t},c=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},u=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,p={f:h&&!l.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:l},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g={}.toString,b=function(t){return g.call(t).slice(8,-1)},v="".split,y=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==b(t)?v.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return y(w(t))},_=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t,e){if(!_(t))return t;var o,i;if(e&&"function"==typeof(o=t.toString)&&!_(i=o.call(t)))return i;if("function"==typeof(o=t.valueOf)&&!_(i=o.call(t)))return i;if(!e&&"function"==typeof(o=t.toString)&&!_(i=o.call(t)))return i;throw TypeError("Can't convert object to primitive value")},T=function(t){return Object(w(t))},S={}.hasOwnProperty,j=Object.hasOwn||function(t,e){return S.call(T(t),e)},A=c.document,E=_(A)&&_(A.createElement),P=!u&&!a((function(){return 7!=Object.defineProperty((t="div",E?A.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),L=Object.getOwnPropertyDescriptor,x={f:u?L:function(t,e){if(t=m(t),e=O(e,!0),P)try{return L(t,e)}catch(t){}if(j(t,e))return d(!p.f.call(t,e),t[e])}},k=function(t){if(!_(t))throw TypeError(String(t)+" is not an object");return t},R=Object.defineProperty,C={f:u?R:function(t,e,o){if(k(t),e=O(e,!0),k(o),P)try{return R(t,e,o)}catch(t){}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(t[e]=o.value),t}},I=u?function(t,e,o){return C.f(t,e,d(1,o))}:function(t,e,o){return t[e]=o,t},D=function(t,e){try{I(c,t,e)}catch(o){c[t]=e}return e},M=c["__core-js_shared__"]||D("__core-js_shared__",{}),H=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(t){return H.call(t)});var B,V,F,W,N=M.inspectSource,z=c.WeakMap,X="function"==typeof z&&/native code/.test(N(z)),Y=s((function(t){(t.exports=function(t,e){return M[t]||(M[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),q=0,G=Math.random(),U=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++q+G).toString(36)},K=Y("keys"),J={},Q=c.WeakMap;if(X||M.state){var Z=M.state||(M.state=new Q),tt=Z.get,et=Z.has,ot=Z.set;B=function(t,e){if(et.call(Z,t))throw new TypeError("Object already initialized");return e.facade=t,ot.call(Z,t,e),e},V=function(t){return tt.call(Z,t)||{}},F=function(t){return et.call(Z,t)}}else{var it=K[W="state"]||(K[W]=U(W));J[it]=!0,B=function(t,e){if(j(t,it))throw new TypeError("Object already initialized");return e.facade=t,I(t,it,e),e},V=function(t){return j(t,it)?t[it]:{}},F=function(t){return j(t,it)}}var rt,nt,st={set:B,get:V,has:F,enforce:function(t){return F(t)?V(t):B(t,{})},getterFor:function(t){return function(e){var o;if(!_(e)||(o=V(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return o}}},ft=s((function(t){var e=st.get,o=st.enforce,i=String(String).split("String");(t.exports=function(t,e,r,n){var s,f=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,u=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof e||j(r,"name")||I(r,"name",e),(s=o(r)).source||(s.source=i.join("string"==typeof e?e:""))),t!==c?(f?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=r:I(t,e,r)):a?t[e]=r:D(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||N(this)}))})),ct=c,at=function(t){return"function"==typeof t?t:void 0},ut=function(t,e){return arguments.length<2?at(ct[t])||at(c[t]):ct[t]&&ct[t][e]||c[t]&&c[t][e]},lt=Math.ceil,ht=Math.floor,pt=function(t){return isNaN(t=+t)?0:(t>0?ht:lt)(t)},dt=Math.min,gt=function(t){return t>0?dt(pt(t),9007199254740991):0},bt=Math.max,vt=Math.min,yt=function(t){return function(e,o,i){var r,n=m(e),s=gt(n.length),f=function(t,e){var o=pt(t);return o<0?bt(o+e,0):vt(o,e)}(i,s);if(t&&o!=o){for(;s>f;)if((r=n[f++])!=r)return!0}else for(;s>f;f++)if((t||f in n)&&n[f]===o)return t||f||0;return!t&&-1}},wt={includes:yt(!0),indexOf:yt(!1)}.indexOf,mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),_t={f:Object.getOwnPropertyNames||function(t){return function(t,e){var o,i=m(t),r=0,n=[];for(o in i)!j(J,o)&&j(i,o)&&n.push(o);for(;e.length>r;)j(i,o=e[r++])&&(~wt(n,o)||n.push(o));return n}(t,mt)}},Ot={f:Object.getOwnPropertySymbols},Tt=ut("Reflect","ownKeys")||function(t){var e=_t.f(k(t)),o=Ot.f;return o?e.concat(o(t)):e},St=function(t,e){for(var o=Tt(e),i=C.f,r=x.f,n=0;n<o.length;n++){var s=o[n];j(t,s)||i(t,s,r(e,s))}},jt=/#|\.prototype\./,At=function(t,e){var o=Et[$t(t)];return o==Lt||o!=Pt&&("function"==typeof e?a(e):!!e)},$t=At.normalize=function(t){return String(t).replace(jt,".").toLowerCase()},Et=At.data={},Pt=At.NATIVE="N",Lt=At.POLYFILL="P",xt=At,kt=x.f,Rt=Array.isArray||function(t){return"Array"==b(t)},Ct=function(t,e,o){var i=O(e);i in t?C.f(t,i,d(0,o)):t[i]=o},It=ut("navigator","userAgent")||"",Dt=c.process,Mt=Dt&&Dt.versions,Ht=Mt&&Mt.v8;Ht?nt=(rt=Ht.split("."))[0]<4?1:rt[0]+rt[1]:It&&(!(rt=It.match(/Edge\/(\d+)/))||rt[1]>=74)&&(rt=It.match(/Chrome\/(\d+)/))&&(nt=rt[1]);var Bt,Vt=nt&&+nt,Ft=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Vt&&Vt<41})),Wt=Ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Nt=Y("wks"),zt=c.Symbol,Xt=Wt?zt:zt&&zt.withoutSetter||U,Yt=function(t){return j(Nt,t)&&(Ft||"string"==typeof Nt[t])||(Ft&&j(zt,t)?Nt[t]=zt[t]:Nt[t]=Xt("Symbol."+t)),Nt[t]},qt=Yt("species"),Gt=function(t,e){var o;return Rt(t)&&("function"!=typeof(o=t.constructor)||o!==Array&&!Rt(o.prototype)?_(o)&&null===(o=o[qt])&&(o=void 0):o=void 0),new(void 0===o?Array:o)(0===e?0:e)},Ut=Yt("species"),Kt=Yt("isConcatSpreadable"),Jt=Vt>=51||!a((function(){var t=[];return t[Kt]=!1,t.concat()[0]!==t})),Qt=(Bt="concat",Vt>=51||!a((function(){var t=[];return(t.constructor={})[Ut]=function(){return{foo:1}},1!==t[Bt](Boolean).foo}))),Zt=function(t){if(!_(t))return!1;var e=t[Kt];return void 0!==e?!!e:Rt(t)};function te(t,e,o,i,r,n,s,f,c,a){"boolean"!=typeof s&&(c=f,f=s,s=!1);var u,l="function"==typeof o?o.options:o;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,r&&(l.functional=!0)),i&&(l._scopeId=i),n?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=u):e&&(u=s?function(t){e.call(this,a(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,f(t))}),u)if(l.functional){var h=l.render;l.render=function(t,e){return u.call(e),h(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return o}!function(t,e){var o,i,r,n,s,f=t.target,a=t.global,u=t.stat;if(o=a?c:u?c[f]||D(f,{}):(c[f]||{}).prototype)for(i in e){if(n=e[i],r=t.noTargetGet?(s=kt(o,i))&&s.value:o[i],!xt(a?i:f+(u?".":"#")+i,t.forced)&&void 0!==r){if(typeof n==typeof r)continue;St(n,r)}(t.sham||r&&r.sham)&&I(n,"sham",!0),ft(o,i,n,t)}}({target:"Array",proto:!0,forced:!Jt||!Qt},{concat:function(t){var e,o,i,r,n,s=T(this),f=Gt(s,0),c=0;for(e=-1,i=arguments.length;e<i;e++)if(Zt(n=-1===e?s:arguments[e])){if(c+(r=gt(n.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(o=0;o<r;o++,c++)o in n&&Ct(f,c,n[o])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Ct(f,c++,n)}return f.length=c,f}});var ee={components:{widget:e.bpWidget},props:{visible:Boolean,mask:{default:!1,type:Boolean},maskClose:{default:!0,type:Boolean},pageClass:String|Array,pageStyle:String|Array|Object,direction:{default:"auto",type:String},trigger:{type:String},bind:{}},computed:{pStyle:function(){return this.pageStyle?"string"==typeof this.pageStyle?"left:".concat(this.offsetLeft,";top:").concat(this.offsetTop,";")+this.pageStyle:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({left:this.offsetLeft,top:this.offsetTop},this.pageStyle):{left:this.offsetLeft,top:this.offsetTop}}},data:function(){return{visibleReal:!1,directionData:"auto",offsetTop:0,offsetLeft:0,offsetArrowLeft:null,offsetArrowTop:null,offsetArrowBottom:null,offsetArrowRight:null}},watch:{visible:function(t,e){this.visibleReal!=t&&(this.visibleReal=t,t!=e&&(t?this._onTriggerShow(null):this._onTriggerHide(null)))},visibleReal:function(t){this.$emit("update:visible",t)},bind:function(t,e){this._removeEvent(e),this._bindEvent(t)}},beforeMount:function(){this.visibleReal=this.visible},beforeDestroy:function(){this._removeEvent(this.bind),$("body").off("click",this._hide)},mounted:function(){var t=this;this.$nextTick(function(){r(this,t),this.$parent.$forceUpdate()}.bind(this))},methods:{show:function(){return this.$refs.widget.show()},hide:function(){return this.$refs.widget.hide()},_removeEvent:function(e){var o;e&&(o=t.dom.isVueObject(e)?e.$el:e,$(o).off("mouseover",this._onTriggerShow),$(o).off("mouseleave",this._onTriggerHide),$(o).off("click",this._onTriggerShow),this.ges&&(this.ges.dispose(),this.ges=null))},_bindEvent:function(e){var o,i=this;if(this._removeEvent(e),e)if(o=t.dom.isVueObject(e)?e.$el:e,"hover"==this.trigger)t.device.browserIsMobile()?$(o).on("click",this._onTriggerShow):($(o).on("mouseover",this._onTriggerShow),$(o).on("mouseleave",this._onTriggerHide));else if("click"==this.trigger){var n=(t.device.browserIsMobile(),"click");$(o).off(n,this._onTriggerShow).on(n,this._onTriggerShow)}else"long-press"==this.trigger&&(this.ges=new t.Gesture(o),this.ges.enablePressRecognizer({duration:600}),this.ges.on("press",function(e){r(this,i),t.device.vibrate(10),this._onTriggerShow(e)}.bind(this)))},_onTriggerShow:function(t){var e=this;this.visibleReal=!0,setTimeout(function(){r(this,e),$("body").off("click",this._hide).on("click",this._hide)}.bind(this),10),this._show(this.direction)},_onTriggerHide:function(e){var o=$(this.$refs.main),i=t.dom.getElementOffset(o[0]);e&&e.clientX+e.offsetX>=i.left&&e.clientX+e.offsetX<=i.left+o[0].offsetWidth&&e.clientY+e.offsetY>=i.top&&e.clientY+e.offsetY<=i.top+o[0].offsetHeight?$(this.$refs.main).on("mouseleave",this._hideVisible):this.visibleReal=!1,$("body").off("click",this._hide)},_show:function(e){var o=this,i=this.bind;if(this.bind){var n;n=t.dom.isVueObject(i)?i.$el:i;var s=t.dom.getElementOffset(n),f={};f.height=n.clientHeight,f.width=n.clientWidth;var c,a=t.dom.getViewPort(),u=t.dom.getDocumentOffset();this.offsetTop=s.top+u.top,"top"==e?(this.directionData="top",this.offsetTop-=8):"bottom"==e?(this.directionData="bottom",this.offsetTop+=f.height):"left"==e?(this.directionData="left",this.offsetLeft=s.left+f.width):"right"==e?(this.directionData="right",this.offsetLeft=s.left+f.width):s.top+f.height/2>a.height/2?(e="top",this.directionData="top",this.offsetTop-=8):(e="bottom",this.directionData="bottom",this.offsetTop+=f.height),this.offsetTop=parseInt(this.offsetTop),c="left"==e||"right"==e?parseInt(s.top+f.height/2):parseInt(s.left+f.width/2);var l=this.$refs.main;t.dom.probeDom(400,function(){return r(this,o),l.clientWidth>0}.bind(this),function(){if(r(this,o),"left"==e||"right"==e){var t=parseInt(c-l.clientHeight/2);t<10&&(t=10),t+l.clientHeight>a.height-10&&(t=a.height-10-l.clientHeight),this.offsetTop=parseInt(t+u.top)+"px",this.offsetLeft="right"==e?s.left+f.width+6:s.left-l.clientWidth-6-6,this.offsetLeft+=u.left,this.offsetLeft=parseInt(this.offsetLeft),this.offsetLeft+="px",this.offsetArrowLeft=null,this.offsetArrowBottom=null,this.offsetArrowTop=parseInt(c-t-6),this.offsetArrowTop<10?this.offsetArrowTop=10:this.offsetArrowTop>l.clientHeight-22&&(this.offsetArrowTop=parseInt(l.clientHeight-22)),this.offsetArrowTop+="px",this.offsetArrowRight=null}else{var i=parseInt(l.clientWidth||50),n=parseInt(l.clientHeight||50);"top"==e&&(this.offsetTop-=n+6),this.offsetTop+="px";var h=parseInt(c-i/2);h<10&&(h=10),h+i>a.width-10&&(h=a.width-10-i),this.offsetLeft=parseInt(h)+"px",this.offsetArrowLeft=parseInt(c-h)-6,this.offsetArrowLeft<10?this.offsetArrowLeft=10:this.offsetArrowLeft>i-22&&(this.offsetArrowLeft=i-22),this.offsetArrowLeft+="px",this.offsetArrowBottom=null,this.offsetArrowTop=null,this.offsetArrowRight=null}}.bind(this))}},_hide:function(){var t=this;$("body").off("click",this._hide),this.hide().then(function(e){r(this,t)}.bind(this))},_hideVisible:function(){this.visibleReal=!1,$(this.$refs.main).off("mouseleave",this._hideVisible)}}},oe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("widget",{ref:"widget",staticClass:"bp-popover",attrs:{visible:t.visibleReal,maskClose:t.maskClose,mask:t.mask,preventEvent:!1,hideBodyScroll:!1,appendToBody:!0},on:{"update:visible":function(e){t.visibleReal=e}}},[o("div",{ref:"main",staticClass:"bp-popover__main",class:t.pageClass,style:t.pStyle,attrs:{direction:t.directionData}},[t._t("default"),t._v(" "),o("div",{staticClass:"bp-popover__arrow",style:{left:t.offsetArrowLeft,top:t.offsetArrowTop,right:t.offsetArrowRight,bottom:t.offsetArrowBottom}})],2)])};oe._withStripped=!0;return{bpPopover:te({render:oe,staticRenderFns:[]},void 0,ee,void 0,!1,void 0,!1,void 0,void 0,void 0)}}));
