/*!
 * bpui popover v0.1.16
 * Copyright (c) 2021 Copyright bpoint.lee@live.com All Rights Reserved.
 * Released under the MIT License.
 */
import t from"@bpui/libs";import e from"@bpui/dialog";function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var s=function(t){return t&&t.Math==Math&&t},c=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof i&&i)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},u=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,p={f:h&&!l.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:l},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g={}.toString,v=function(t){return g.call(t).slice(8,-1)},b="".split,y=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==v(t)?b.call(t,""):Object(t)}:Object,m=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},w=function(t){return y(m(t))},_=function(t){return"object"==typeof t?null!==t:"function"==typeof t},T=function(t,e){if(!_(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!_(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!_(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!_(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")},O=function(t){return Object(m(t))},S={}.hasOwnProperty,j=Object.hasOwn||function(t,e){return S.call(O(t),e)},A=c.document,E=_(A)&&_(A.createElement),L=!u&&!a((function(){return 7!=Object.defineProperty((t="div",E?A.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),P=Object.getOwnPropertyDescriptor,x={f:u?P:function(t,e){if(t=w(t),e=T(e,!0),L)try{return P(t,e)}catch(t){}if(j(t,e))return d(!p.f.call(t,e),t[e])}},k=function(t){if(!_(t))throw TypeError(String(t)+" is not an object");return t},C=Object.defineProperty,I={f:u?C:function(t,e,r){if(k(t),e=T(e,!0),k(r),L)try{return C(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},R=u?function(t,e,r){return I.f(t,e,d(1,r))}:function(t,e,r){return t[e]=r,t},D=function(t,e){try{R(c,t,e)}catch(r){c[t]=e}return e},M=c["__core-js_shared__"]||D("__core-js_shared__",{}),B=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(t){return B.call(t)});var H,F,N,V,W=M.inspectSource,z=c.WeakMap,U="function"==typeof z&&/native code/.test(W(z)),G=f((function(t){(t.exports=function(t,e){return M[t]||(M[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),X=0,q=Math.random(),K=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++X+q).toString(36)},Y=G("keys"),J={},Q=c.WeakMap;if(U||M.state){var Z=M.state||(M.state=new Q),tt=Z.get,et=Z.has,rt=Z.set;H=function(t,e){if(et.call(Z,t))throw new TypeError("Object already initialized");return e.facade=t,rt.call(Z,t,e),e},F=function(t){return tt.call(Z,t)||{}},N=function(t){return et.call(Z,t)}}else{var ot=Y[V="state"]||(Y[V]=K(V));J[ot]=!0,H=function(t,e){if(j(t,ot))throw new TypeError("Object already initialized");return e.facade=t,R(t,ot,e),e},F=function(t){return j(t,ot)?t[ot]:{}},N=function(t){return j(t,ot)}}var nt,it,ft={set:H,get:F,has:N,enforce:function(t){return N(t)?F(t):H(t,{})},getterFor:function(t){return function(e){var r;if(!_(e)||(r=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},st=f((function(t){var e=ft.get,r=ft.enforce,o=String(String).split("String");(t.exports=function(t,e,n,i){var f,s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,u=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof e||j(n,"name")||R(n,"name",e),(f=r(n)).source||(f.source=o.join("string"==typeof e?e:""))),t!==c?(s?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=n:R(t,e,n)):a?t[e]=n:D(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||W(this)}))})),ct=c,at=function(t){return"function"==typeof t?t:void 0},ut=function(t,e){return arguments.length<2?at(ct[t])||at(c[t]):ct[t]&&ct[t][e]||c[t]&&c[t][e]},lt=Math.ceil,ht=Math.floor,pt=function(t){return isNaN(t=+t)?0:(t>0?ht:lt)(t)},dt=Math.min,gt=function(t){return t>0?dt(pt(t),9007199254740991):0},vt=Math.max,bt=Math.min,yt=function(t){return function(e,r,o){var n,i=w(e),f=gt(i.length),s=function(t,e){var r=pt(t);return r<0?vt(r+e,0):bt(r,e)}(o,f);if(t&&r!=r){for(;f>s;)if((n=i[s++])!=n)return!0}else for(;f>s;s++)if((t||s in i)&&i[s]===r)return t||s||0;return!t&&-1}},mt={includes:yt(!0),indexOf:yt(!1)}.indexOf,wt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),_t={f:Object.getOwnPropertyNames||function(t){return function(t,e){var r,o=w(t),n=0,i=[];for(r in o)!j(J,r)&&j(o,r)&&i.push(r);for(;e.length>n;)j(o,r=e[n++])&&(~mt(i,r)||i.push(r));return i}(t,wt)}},Tt={f:Object.getOwnPropertySymbols},Ot=ut("Reflect","ownKeys")||function(t){var e=_t.f(k(t)),r=Tt.f;return r?e.concat(r(t)):e},St=function(t,e){for(var r=Ot(e),o=I.f,n=x.f,i=0;i<r.length;i++){var f=r[i];j(t,f)||o(t,f,n(e,f))}},jt=/#|\.prototype\./,At=function(t,e){var r=$t[Et(t)];return r==Pt||r!=Lt&&("function"==typeof e?a(e):!!e)},Et=At.normalize=function(t){return String(t).replace(jt,".").toLowerCase()},$t=At.data={},Lt=At.NATIVE="N",Pt=At.POLYFILL="P",xt=At,kt=x.f,Ct=Array.isArray||function(t){return"Array"==v(t)},It=function(t,e,r){var o=T(e);o in t?I.f(t,o,d(0,r)):t[o]=r},Rt=ut("navigator","userAgent")||"",Dt=c.process,Mt=Dt&&Dt.versions,Bt=Mt&&Mt.v8;Bt?it=(nt=Bt.split("."))[0]<4?1:nt[0]+nt[1]:Rt&&(!(nt=Rt.match(/Edge\/(\d+)/))||nt[1]>=74)&&(nt=Rt.match(/Chrome\/(\d+)/))&&(it=nt[1]);var Ht,Ft=it&&+it,Nt=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Ft&&Ft<41})),Vt=Nt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wt=G("wks"),zt=c.Symbol,Ut=Vt?zt:zt&&zt.withoutSetter||K,Gt=function(t){return j(Wt,t)&&(Nt||"string"==typeof Wt[t])||(Nt&&j(zt,t)?Wt[t]=zt[t]:Wt[t]=Ut("Symbol."+t)),Wt[t]},Xt=Gt("species"),qt=function(t,e){var r;return Ct(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Ct(r.prototype)?_(r)&&null===(r=r[Xt])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},Kt=Gt("species"),Yt=Gt("isConcatSpreadable"),Jt=Ft>=51||!a((function(){var t=[];return t[Yt]=!1,t.concat()[0]!==t})),Qt=(Ht="concat",Ft>=51||!a((function(){var t=[];return(t.constructor={})[Kt]=function(){return{foo:1}},1!==t[Ht](Boolean).foo}))),Zt=function(t){if(!_(t))return!1;var e=t[Yt];return void 0!==e?!!e:Ct(t)};function te(t,e,r,o,n,i,f,s,c,a){"boolean"!=typeof f&&(c=s,s=f,f=!1);var u,l="function"==typeof r?r.options:r;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,n&&(l.functional=!0)),o&&(l._scopeId=o),i?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=u):e&&(u=f?function(t){e.call(this,a(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),u)if(l.functional){var h=l.render;l.render=function(t,e){return u.call(e),h(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return r}!function(t,e){var r,o,n,i,f,s=t.target,a=t.global,u=t.stat;if(r=a?c:u?c[s]||D(s,{}):(c[s]||{}).prototype)for(o in e){if(i=e[o],n=t.noTargetGet?(f=kt(r,o))&&f.value:r[o],!xt(a?o:s+(u?".":"#")+o,t.forced)&&void 0!==n){if(typeof i==typeof n)continue;St(i,n)}(t.sham||n&&n.sham)&&R(i,"sham",!0),st(r,o,i,t)}}({target:"Array",proto:!0,forced:!Jt||!Qt},{concat:function(t){var e,r,o,n,i,f=O(this),s=qt(f,0),c=0;for(e=-1,o=arguments.length;e<o;e++)if(Zt(i=-1===e?f:arguments[e])){if(c+(n=gt(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<n;r++,c++)r in i&&It(s,c,i[r])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");It(s,c++,i)}return s.length=c,s}});var ee={components:{widget:e.bpWidget},props:{visible:Boolean,mask:{default:!1,type:Boolean},maskClose:{default:!0,type:Boolean},pageClass:String|Array,pageStyle:String|Array|Object,direction:{default:"auto",type:String},trigger:{type:String},bind:{}},computed:{pStyle:function(){return this.pageStyle?"string"==typeof this.pageStyle?"left:".concat(this.offsetLeft,";top:").concat(this.offsetTop,";")+this.pageStyle:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({left:this.offsetLeft,top:this.offsetTop},this.pageStyle):{left:this.offsetLeft,top:this.offsetTop}}},data:function(){return{visibleReal:!1,directionData:"auto",offsetTop:0,offsetLeft:0,offsetArrowLeft:null,offsetArrowTop:null,offsetArrowBottom:null,offsetArrowRight:null}},watch:{visible:function(t,e){this.visibleReal!=t&&(this.visibleReal=t,t!=e&&t&&this._show(this.direction))},visibleReal:function(t){this.$emit("update:visible",t)},bind:function(t,e){this._removeEvent(e),this._bindEvent(t)}},beforeMount:function(){this.visibleReal=this.visible},beforeDestroy:function(){$("body").off("click",this._hide)},mounted:function(){var t=this;this.$nextTick(function(){n(this,t),this.$parent.$forceUpdate()}.bind(this))},methods:{show:function(){return this.$refs.widget.show()},hide:function(){return this.$refs.widget.hide()},_removeEvent:function(e){var r;e&&(r=t.dom.isVueObject(e)?e.$el:e,$(r).off("mouseover",this._onTrigger),$(r).off("mouseleave",this._onTriggerHide),$(r).off("click",this._onTrigger))},_bindEvent:function(e){var r;if(this._removeEvent(e),e)if(r=t.dom.isVueObject(e)?e.$el:e,"hover"==this.trigger)t.device.browserIsMobile()?$(r).on("click",this._onTrigger):($(r).on("mouseover",this._onTrigger),$(r).on("mouseleave",this._onTriggerHide));else if("click"==this.trigger){var o=(t.device.browserIsMobile(),"click");$(r).off(o,this._onTrigger).on(o,this._onTrigger)}},_onTrigger:function(t){var e=this;this.visibleReal=!0,setTimeout(function(){n(this,e),$("body").off("click",this._hide).on("click",this._hide)}.bind(this),10),this._show(this.direction)},_onTriggerHide:function(t){this.visibleReal=!1,$("body").off("click",this._hide)},_show:function(e){var r=this,o=this.bind;if(this.bind){var i;i=t.dom.isVueObject(o)?o.$el:o;var f=t.dom.getElementOffset(i),s={};s.height=i.clientHeight,s.width=i.clientWidth;var c,a=t.dom.getViewPort(),u=t.dom.getDocumentOffset();this.offsetTop=f.top+u.top,"top"==e?(this.directionData="top",this.offsetTop-=s.height,this.offsetTop-=8):"bottom"==e?(this.directionData="bottom",this.offsetTop+=s.height):"left"==e?(this.directionData="left",this.offsetLeft=f.left+s.width):"right"==e?(this.directionData="right",this.offsetLeft=f.left+s.width):f.top+s.height/2>a.height/2?(this.directionData="top",this.offsetTop-=s.height,this.offsetTop-=8):(this.directionData="bottom",this.offsetTop+=s.height),this.offsetTop=parseInt(this.offsetTop),this.offsetTop+="px",c="left"==e||"right"==e?parseInt(f.top+s.height/2):parseInt(f.left+s.width/2);var l=this.$refs.main;t.dom.probeDom(400,function(){return n(this,r),l.clientWidth>0}.bind(this),function(){if(n(this,r),"left"==e||"right"==e){var t=parseInt(c-l.clientHeight/2);t<10&&(t=10),t+l.clientHeight>a.height-10&&(t=a.height-10-l.clientHeight),this.offsetTop=parseInt(t+u.top)+"px",this.offsetLeft="right"==e?f.left+s.width-6:f.left-l.clientWidth-6,this.offsetLeft+=u.left,this.offsetLeft=parseInt(this.offsetLeft),this.offsetLeft+="px",this.offsetArrowLeft=null,this.offsetArrowBottom=null,this.offsetArrowTop=parseInt(c-t-6),this.offsetArrowTop<10?this.offsetArrowTop=10:this.offsetArrowTop>l.clientHeight-22&&(this.offsetArrowTop=parseInt(l.clientHeight-22)),this.offsetArrowTop+="px",this.offsetArrowRight=null}else{var o=parseInt(l.clientWidth||50),i=parseInt(c-o/2);i<10&&(i=10),i+o>a.width-10&&(i=a.width-10-o),this.offsetLeft=parseInt(i)+"px",this.offsetArrowLeft=parseInt(c-i)-6,this.offsetArrowLeft<10?this.offsetArrowLeft=10:this.offsetArrowLeft>o-22&&(this.offsetArrowLeft=o-22),this.offsetArrowLeft+="px",this.offsetArrowBottom=null,this.offsetArrowTop=null,this.offsetArrowRight=null}}.bind(this))}},_hide:function(){var t=this;$("body").off("click",this._hide),this.hide().then(function(e){n(this,t)}.bind(this))}}},re=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("widget",{ref:"widget",staticClass:"bp-popover",attrs:{visible:t.visibleReal,maskClose:t.maskClose,mask:t.mask,preventEvent:!1,hideBodyScroll:!1,appendToBody:!0},on:{"update:visible":function(e){t.visibleReal=e}}},[r("div",{ref:"main",staticClass:"bp-popover__main",class:t.pageClass,style:t.pStyle,attrs:{direction:t.directionData}},[t._t("default"),t._v(" "),r("div",{staticClass:"bp-popover__arrow",style:{left:t.offsetArrowLeft,top:t.offsetArrowTop,right:t.offsetArrowRight,bottom:t.offsetArrowBottom}})],2)])};re._withStripped=!0;var oe={bpPopover:te({render:re,staticRenderFns:[]},void 0,ee,void 0,!1,void 0,!1,void 0,void 0,void 0)};export default oe;
