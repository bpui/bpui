/*!
 * bpui popover v1.1.27
 * Copyright (c) 2021 Copyright bpoint.lee@live.com All Rights Reserved.
 * Released under the MIT License.
 */
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var e=t(require("@bpui/libs")),i=t(require("@bpui/dialog"));function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var c=function(t){return t&&t.Math==Math&&t},a=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof s&&s)||function(){return this}()||Function("return this")(),u=function(t){try{return!!t()}catch(t){return!0}},l=!u((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,d={f:p&&!h.call({1:2},1)?function(t){var e=p(this,t);return!!e&&e.enumerable}:h},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,v=function(t){return b.call(t).slice(8,-1)},y="".split,w=u((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==v(t)?y.call(t,""):Object(t)}:Object,m=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},_=function(t){return w(m(t))},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t,e){if(!T(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!T(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!T(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!T(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")},S=function(t){return Object(m(t))},j={}.hasOwnProperty,E=Object.hasOwn||function(t,e){return j.call(S(t),e)},A=a.document,L=T(A)&&T(A.createElement),P=!l&&!u((function(){return 7!=Object.defineProperty((t="div",L?A.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),I=Object.getOwnPropertyDescriptor,x={f:l?I:function(t,e){if(t=_(t),e=O(e,!0),P)try{return I(t,e)}catch(t){}if(E(t,e))return g(!d.f.call(t,e),t[e])}},k=function(t){if(!T(t))throw TypeError(String(t)+" is not an object");return t},R=Object.defineProperty,C={f:l?R:function(t,e,i){if(k(t),e=O(e,!0),k(i),P)try{return R(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},M=l?function(t,e,i){return C.f(t,e,g(1,i))}:function(t,e,i){return t[e]=i,t},D=function(t,e){try{M(a,t,e)}catch(i){a[t]=e}return e},H=a["__core-js_shared__"]||D("__core-js_shared__",{}),B=Function.toString;"function"!=typeof H.inspectSource&&(H.inspectSource=function(t){return B.call(t)});var V,W,F,N,z=H.inspectSource,X=a.WeakMap,Y="function"==typeof X&&/native code/.test(z(X)),q=f((function(t){(t.exports=function(t,e){return H[t]||(H[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),G=0,U=Math.random(),K=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+U).toString(36)},J=q("keys"),Q={},Z=a.WeakMap;if(Y||H.state){var tt=H.state||(H.state=new Z),et=tt.get,it=tt.has,ot=tt.set;V=function(t,e){if(it.call(tt,t))throw new TypeError("Object already initialized");return e.facade=t,ot.call(tt,t,e),e},W=function(t){return et.call(tt,t)||{}},F=function(t){return it.call(tt,t)}}else{var rt=J[N="state"]||(J[N]=K(N));Q[rt]=!0,V=function(t,e){if(E(t,rt))throw new TypeError("Object already initialized");return e.facade=t,M(t,rt,e),e},W=function(t){return E(t,rt)?t[rt]:{}},F=function(t){return E(t,rt)}}var nt,st,ft={set:V,get:W,has:F,enforce:function(t){return F(t)?W(t):V(t,{})},getterFor:function(t){return function(e){var i;if(!T(e)||(i=W(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},ct=f((function(t){var e=ft.get,i=ft.enforce,o=String(String).split("String");(t.exports=function(t,e,r,n){var s,f=!!n&&!!n.unsafe,c=!!n&&!!n.enumerable,u=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof e||E(r,"name")||M(r,"name",e),(s=i(r)).source||(s.source=o.join("string"==typeof e?e:""))),t!==a?(f?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=r:M(t,e,r)):c?t[e]=r:D(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z(this)}))})),at=a,ut=function(t){return"function"==typeof t?t:void 0},lt=function(t,e){return arguments.length<2?ut(at[t])||ut(a[t]):at[t]&&at[t][e]||a[t]&&a[t][e]},ht=Math.ceil,pt=Math.floor,dt=function(t){return isNaN(t=+t)?0:(t>0?pt:ht)(t)},gt=Math.min,bt=function(t){return t>0?gt(dt(t),9007199254740991):0},vt=Math.max,yt=Math.min,wt=function(t){return function(e,i,o){var r,n=_(e),s=bt(n.length),f=function(t,e){var i=dt(t);return i<0?vt(i+e,0):yt(i,e)}(o,s);if(t&&i!=i){for(;s>f;)if((r=n[f++])!=r)return!0}else for(;s>f;f++)if((t||f in n)&&n[f]===i)return t||f||0;return!t&&-1}},mt={includes:wt(!0),indexOf:wt(!1)}.indexOf,_t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(t){return function(t,e){var i,o=_(t),r=0,n=[];for(i in o)!E(Q,i)&&E(o,i)&&n.push(i);for(;e.length>r;)E(o,i=e[r++])&&(~mt(n,i)||n.push(i));return n}(t,_t)}},Ot={f:Object.getOwnPropertySymbols},St=lt("Reflect","ownKeys")||function(t){var e=Tt.f(k(t)),i=Ot.f;return i?e.concat(i(t)):e},jt=function(t,e){for(var i=St(e),o=C.f,r=x.f,n=0;n<i.length;n++){var s=i[n];E(t,s)||o(t,s,r(e,s))}},$t=/#|\.prototype\./,Et=function(t,e){var i=Lt[At(t)];return i==It||i!=Pt&&("function"==typeof e?u(e):!!e)},At=Et.normalize=function(t){return String(t).replace($t,".").toLowerCase()},Lt=Et.data={},Pt=Et.NATIVE="N",It=Et.POLYFILL="P",xt=Et,kt=x.f,Rt=Array.isArray||function(t){return"Array"==v(t)},Ct=function(t,e,i){var o=O(e);o in t?C.f(t,o,g(0,i)):t[o]=i},Mt=lt("navigator","userAgent")||"",Dt=a.process,Ht=Dt&&Dt.versions,Bt=Ht&&Ht.v8;Bt?st=(nt=Bt.split("."))[0]<4?1:nt[0]+nt[1]:Mt&&(!(nt=Mt.match(/Edge\/(\d+)/))||nt[1]>=74)&&(nt=Mt.match(/Chrome\/(\d+)/))&&(st=nt[1]);var Vt,Wt=st&&+st,Ft=!!Object.getOwnPropertySymbols&&!u((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Wt&&Wt<41})),Nt=Ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,zt=q("wks"),Xt=a.Symbol,Yt=Nt?Xt:Xt&&Xt.withoutSetter||K,qt=function(t){return E(zt,t)&&(Ft||"string"==typeof zt[t])||(Ft&&E(Xt,t)?zt[t]=Xt[t]:zt[t]=Yt("Symbol."+t)),zt[t]},Gt=qt("species"),Ut=function(t,e){var i;return Rt(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!Rt(i.prototype)?T(i)&&null===(i=i[Gt])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},Kt=qt("species"),Jt=qt("isConcatSpreadable"),Qt=Wt>=51||!u((function(){var t=[];return t[Jt]=!1,t.concat()[0]!==t})),Zt=(Vt="concat",Wt>=51||!u((function(){var t=[];return(t.constructor={})[Kt]=function(){return{foo:1}},1!==t[Vt](Boolean).foo}))),te=function(t){if(!T(t))return!1;var e=t[Jt];return void 0!==e?!!e:Rt(t)};function ee(t,e,i,o,r,n,s,f,c,a){"boolean"!=typeof s&&(c=f,f=s,s=!1);var u,l="function"==typeof i?i.options:i;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,r&&(l.functional=!0)),o&&(l._scopeId=o),n?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=u):e&&(u=s?function(t){e.call(this,a(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,f(t))}),u)if(l.functional){var h=l.render;l.render=function(t,e){return u.call(e),h(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return i}!function(t,e){var i,o,r,n,s,f=t.target,c=t.global,u=t.stat;if(i=c?a:u?a[f]||D(f,{}):(a[f]||{}).prototype)for(o in e){if(n=e[o],r=t.noTargetGet?(s=kt(i,o))&&s.value:i[o],!xt(c?o:f+(u?".":"#")+o,t.forced)&&void 0!==r){if(typeof n==typeof r)continue;jt(n,r)}(t.sham||r&&r.sham)&&M(n,"sham",!0),ct(i,o,n,t)}}({target:"Array",proto:!0,forced:!Qt||!Zt},{concat:function(t){var e,i,o,r,n,s=S(this),f=Ut(s,0),c=0;for(e=-1,o=arguments.length;e<o;e++)if(te(n=-1===e?s:arguments[e])){if(c+(r=bt(n.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<r;i++,c++)i in n&&Ct(f,c,n[i])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Ct(f,c++,n)}return f.length=c,f}});var ie={components:{widget:i.bpWidget},props:{visible:Boolean,mask:{default:!1,type:Boolean},maskClose:{default:!0,type:Boolean},pageClass:String|Array,pageStyle:String|Array|Object,direction:{default:"auto",type:String},trigger:{type:String},bind:{default:null,type:[String,Object,HTMLElement]}},computed:{pStyle:function(){return this.pageStyle?"string"==typeof this.pageStyle?"left:".concat(this.offsetLeft,";top:").concat(this.offsetTop,";")+this.pageStyle:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({left:this.offsetLeft,top:this.offsetTop},this.pageStyle):{left:this.offsetLeft,top:this.offsetTop}}},data:function(){return{visibleReal:!1,directionData:"auto",offsetTop:0,offsetLeft:0,offsetArrowLeft:null,offsetArrowTop:null,offsetArrowBottom:null,offsetArrowRight:null}},watch:{visible:function(t,e){this.visibleReal!=t&&(this.visibleReal=t,t!=e&&(t?this._onTriggerShow(null):this._onTriggerHide(null)))},visibleReal:function(t){this.$emit("update:visible",t)},bind:function(t,e){this._removeEvent(e),this._bindEvent(t)}},beforeMount:function(){this.visibleReal=this.visible},beforeDestroy:function(){this._removeEvent(this.bind);var t=e.device.browserIsMobile()?"click":"mousedown";$("body").off(t,this._hide)},mounted:function(){var t=this;this.$nextTick(function(){var e=this;n(this,t),this.$parent.$forceUpdate(),this.$nextTick(function(){n(this,e),this.bind||this._bindEvent(this.bind)}.bind(this))}.bind(this))},methods:{show:function(){return this.$refs.widget.show()},hide:function(){return this.$refs.widget.hide()},_removeEvent:function(t){var i;t&&(i=e.dom.isVueObject(t)?t.$el:t,$(i).off("mouseover",this._onTriggerShow),$(i).off("mouseleave",this._onTriggerHide),$(i).off("click",this._onTriggerShow),this.ges&&(this.ges.dispose(),this.ges=null))},_bindEvent:function(t){var i,o=this;if(this._removeEvent(t),!t){if(!(t=this.$refs.widget._uuid))throw new Error("cannot find the popover bind");t=$("."+t)[0]}if(t)if(i=e.dom.isVueObject(t)?t.$el:t,"hover"==this.trigger)e.device.browserIsMobile()?$(i).on("click",this._onTriggerShow):($(i).on("mouseover",this._onTriggerShow),$(i).on("mouseleave",this._onTriggerHide));else if("click"==this.trigger){var r=(e.device.browserIsMobile(),"click");$(i).off(r,this._onTriggerShow).on(r,this._onTriggerShow)}else"long-press"==this.trigger&&(this.ges=new e.Gesture(i),this.ges.enablePressRecognizer({duration:600}),this.ges.on("press",function(t){n(this,o),e.device.vibrate(10),this._onTriggerShow(t)}.bind(this)))},_onTriggerShow:function(t){var i=this,o=e.device.browserIsMobile()?"click":"mousedown";if(t&&"click"==this.trigger&&this.visibleReal)return $("body").off(o,this._hide),this._hide(),t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,!1;this.visibleReal=!0,setTimeout(function(){n(this,i),$("body").off(o,this._hide).on(o,this._hide)}.bind(this),10),this._show(this.direction)},_onTriggerHide:function(t){var i=$(this.$refs.main),o=t,r=e.dom.getElementOffset(i[0]);o&&o.clientX>=r.left-14&&o.clientX<=r.left+i[0].offsetWidth+14&&o.clientY>=r.top-14&&o.clientY<=r.top+i[0].offsetHeight+14?$(this.$refs.main).on("mouseleave",this._hideVisible):this.visibleReal=!1;var n=e.device.browserIsMobile()?"click":"mousedown";$("body").off(n,this._hide)},_show:function(t){var i,o=this,r=this.bind;if(!this.bind){if(!(r=this.$refs.widget._uuid))throw new Error("cannot find the popover bind");r=$("."+r)[0]}i=e.dom.isVueObject(r)?r.$el:r;var s=e.dom.getElementOffset(i),f={};f.height=i.clientHeight,f.width=i.clientWidth;var c,a=e.dom.getViewPort(),u=e.dom.getDocumentOffset();this.offsetTop=s.top+u.top,"top"==t?(this.directionData="top",this.offsetTop-=8):"bottom"==t?(this.directionData="bottom",this.offsetTop+=f.height):"left"==t?(this.directionData="left",this.offsetLeft=s.left+f.width):"right"==t?(this.directionData="right",this.offsetLeft=s.left+f.width):s.top+f.height/2>a.height/2?(t="top",this.directionData="top",this.offsetTop-=8):(t="bottom",this.directionData="bottom",this.offsetTop+=f.height),this.offsetTop=parseInt(this.offsetTop),c="left"==t||"right"==t?parseInt(s.top+f.height/2):parseInt(s.left+f.width/2);var l=this.$refs.main;e.dom.probeDom(400,function(){return n(this,o),l.clientWidth>0}.bind(this),function(){if(n(this,o),"left"==t||"right"==t){var e=parseInt(c-l.clientHeight/2);e<10&&(e=10),e+l.clientHeight>a.height-10&&(e=a.height-10-l.clientHeight),this.offsetTop=parseInt(e+u.top)+"px",this.offsetLeft="right"==t?s.left+f.width+6:s.left-l.clientWidth-6-6,this.offsetLeft+=u.left,this.offsetLeft=parseInt(this.offsetLeft),this.offsetLeft+="px",this.offsetArrowLeft=null,this.offsetArrowBottom=null,this.offsetArrowTop=parseInt(c-e-6),this.offsetArrowTop<10?this.offsetArrowTop=10:this.offsetArrowTop>l.clientHeight-22&&(this.offsetArrowTop=parseInt(l.clientHeight-22)),this.offsetArrowTop+="px",this.offsetArrowRight=null}else{var i=parseInt(l.clientWidth||50),r=parseInt(l.clientHeight||50);"top"==t&&(this.offsetTop-=r+6),this.offsetTop+="px";var h=parseInt(c-i/2);h<10&&(h=10),h+i>a.width-10&&(h=a.width-10-i),this.offsetLeft=parseInt(h)+"px",this.offsetArrowLeft=parseInt(c-h)-6,this.offsetArrowLeft<10?this.offsetArrowLeft=10:this.offsetArrowLeft>i-22&&(this.offsetArrowLeft=i-22),this.offsetArrowLeft+="px",this.offsetArrowBottom=null,this.offsetArrowTop=null,this.offsetArrowRight=null}}.bind(this))},_hide:function(t){var i=this,o=e.device.browserIsMobile()?"click":"mousedown";$("body").off(o,this._hide),this.hide().then(function(t){n(this,i)}.bind(this))},_hideVisible:function(t){if($(this.$refs.main).off("mouseleave",this._hideVisible),t){var i;e.dom.isVueObject(this.bind)?i=this.bind.$el:"string"==typeof(i=this.bind)&&(i=$(i)[0]);var o=e.dom.getElementOffset(i);if(t.clientX>=o.left-14&&t.clientX<=o.left+i.offsetWidth+14&&t.clientY>=o.top-14&&t.clientY<=o.top+i.offsetHeight+14)return}this.visibleReal=!1}}},oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("widget",{ref:"widget",staticClass:"bp-popover",attrs:{visible:t.visibleReal,maskClose:t.maskClose,mask:t.mask,preventEvent:!1,hideBodyScroll:!1,appendToBody:!0},on:{"update:visible":function(e){t.visibleReal=e}}},[i("div",{ref:"main",staticClass:"bp-popover__main",class:t.pageClass,style:t.pStyle,attrs:{direction:t.directionData}},[t._t("default"),t._v(" "),i("div",{staticClass:"bp-popover__arrow",style:{left:t.offsetArrowLeft,top:t.offsetArrowTop,right:t.offsetArrowRight,bottom:t.offsetArrowBottom}})],2)])};oe._withStripped=!0;var re={bpPopover:ee({render:oe,staticRenderFns:[]},void 0,ie,void 0,!1,void 0,!1,void 0,void 0,void 0)};module.exports=re;
